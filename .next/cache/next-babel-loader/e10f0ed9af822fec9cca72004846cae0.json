{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport Router, { withRouter } from 'next/router';\nimport isEmpty from 'lodash/isEmpty';\nimport { FaMapMarkerAlt, FaRegCalendar, FaUserFriends } from 'react-icons/fa';\nimport MapAutoComplete from 'components/Map/MapAutoComplete';\nimport InputIncDec from 'components/UI/InputIncDec/InputIncDec';\nimport DateRangePickerBox from 'components/UI/DatePicker/ReactDates';\nimport { mapDataHelper } from 'components/Map/mapDataHelper';\nimport ViewWithPopup from 'components/UI/ViewWithPopup/ViewWithPopup';\nimport { FormWrapper, ComponentWrapper, RoomGuestWrapper, ItemWrapper } from './Search.style';\nimport { LISTING_POSTS_PAGE } from '../../../settings/constant';\nimport { SearchContext } from '../../../context/SearchProvider';\nvar calendarItem = {\n  separator: '-',\n  format: 'MM-DD-YYYY',\n  locale: 'en'\n};\n\nvar SearchForm = function SearchForm() {\n  var _useContext = useContext(SearchContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var _useState = useState({\n    setStartDate: null,\n    setEndDate: null\n  }),\n      searchDate = _useState[0],\n      setSearchDate = _useState[1];\n\n  var _useState2 = useState([]),\n      mapValue = _useState2[0],\n      setMapValue = _useState2[1];\n\n  var _useState3 = useState({\n    room: 0,\n    guest: 0\n  }),\n      roomGuest = _useState3[0],\n      setRoomGuest = _useState3[1];\n\n  var updatevalueFunc = function updatevalueFunc(event) {\n    var searchedPlaceAPIData = event.searchedPlaceAPIData;\n\n    if (!isEmpty(searchedPlaceAPIData)) {\n      setMapValue(searchedPlaceAPIData);\n    }\n  };\n\n  var handleIncrement = function handleIncrement(type) {\n    setRoomGuest(_objectSpread(_objectSpread({}, roomGuest), {}, _defineProperty({}, type, roomGuest[type] + 1)));\n  };\n\n  var handleDecrement = function handleDecrement(type) {\n    if (roomGuest[type] <= 0) {\n      return false;\n    }\n\n    setRoomGuest(_objectSpread(_objectSpread({}, roomGuest), {}, _defineProperty({}, type, roomGuest[type] - 1)));\n  };\n\n  var handleIncDecOnChnage = function handleIncDecOnChnage(e, type) {\n    var currentValue = e.target.value;\n    setRoomGuest(_objectSpread(_objectSpread({}, roomGuest), {}, _defineProperty({}, type, currentValue)));\n  };\n\n  var goToSearchPage = function goToSearchPage() {\n    var tempLocation = [],\n        dateRange = {},\n        location_lat = '',\n        location_lng = '';\n    var mapData = mapValue ? mapDataHelper(mapValue) : [];\n    mapData && mapData.map(function (singleMapData, i) {\n      return tempLocation.push({\n        formattedAddress: singleMapData ? singleMapData.formattedAddress : '',\n        lat: singleMapData ? singleMapData.lat.toFixed(3) : null,\n        lng: singleMapData ? singleMapData.lng.toFixed(3) : null\n      });\n    });\n    var location = tempLocation ? tempLocation[0] : {};\n    dateRange.startDate = searchDate ? searchDate.setStartDate : null;\n    dateRange.endDate = searchDate ? searchDate.setEndDate : null;\n\n    if (location && location.lat) {\n      location_lat = location.lat;\n    }\n\n    if (location && location.lng) {\n      location_lng = location.lng;\n    }\n\n    var query = {\n      setStartDate: searchDate.setStartDate,\n      setEndDate: searchDate.setEndDate,\n      room: roomGuest.room,\n      guest: roomGuest.guest,\n      location_lat: location_lat,\n      location_lng: location_lng\n    };\n\n    for (var key in query) {\n      if (query[key] === '' || query[key] === null || query[key] === 0) {\n        delete query[key];\n      }\n    }\n\n    dispatch({\n      type: 'UPDATE',\n      payload: _objectSpread(_objectSpread({}, state), {}, {\n        setStartDate: searchDate.setStartDate,\n        setEndDate: searchDate.setEndDate,\n        room: roomGuest.room,\n        guest: roomGuest.guest,\n        location_lat: location_lat,\n        location_lng: location_lng\n      })\n    });\n    Router.push({\n      pathname: \"\".concat(LISTING_POSTS_PAGE),\n      query: query\n    }, {\n      pathname: \"\".concat(LISTING_POSTS_PAGE),\n      query: query\n    }, {\n      shallow: true\n    });\n  };\n\n  return __jsx(FormWrapper, null, __jsx(ComponentWrapper, null, __jsx(FaMapMarkerAlt, {\n    className: \"map-marker\"\n  }), __jsx(MapAutoComplete, {\n    updatevalue: function updatevalue(value) {\n      return updatevalueFunc(value);\n    }\n  }), __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"30\",\n    height: \"30\",\n    viewBox: \"0 0 144.083 144\",\n    enableBackground: \"new 0 0 144.083 144\",\n    className: \"target\"\n  }, __jsx(\"path\", {\n    d: \"M117.292,69h-13.587C102.28,53.851,90.19,41.761,75.042,40.337V26.5h-6v13.837C53.893,41.761,41.802,53.851,40.378,69  H26.792v6h13.587c1.425,15.148,13.515,27.238,28.663,28.663V117.5h6v-13.837C90.19,102.238,102.28,90.148,103.705,75h13.587V69z   M72.042,97.809c-14.23,0-25.809-11.578-25.809-25.809c0-14.231,11.578-25.809,25.809-25.809S97.85,57.769,97.85,72  C97.85,86.23,86.272,97.809,72.042,97.809z\"\n  }), __jsx(\"path\", {\n    d: \"M72.042,52.541c-10.729,0-19.459,8.729-19.459,19.459s8.729,19.459,19.459,19.459S91.5,82.729,91.5,72  S82.771,52.541,72.042,52.541z M72.042,85.459c-7.421,0-13.459-6.037-13.459-13.459c0-7.421,6.038-13.459,13.459-13.459  S85.5,64.579,85.5,72C85.5,79.422,79.462,85.459,72.042,85.459z\"\n  }))), __jsx(ComponentWrapper, null, __jsx(FaRegCalendar, {\n    className: \"calendar\"\n  }), __jsx(DateRangePickerBox, {\n    item: calendarItem,\n    startDateId: \"startDateId-id-home\",\n    endDateId: \"endDateId-id-home\",\n    updateSearchData: function updateSearchData(setDateValue) {\n      return setSearchDate(setDateValue);\n    },\n    showClearDates: true,\n    small: true,\n    numberOfMonths: 1\n  })), __jsx(ComponentWrapper, null, __jsx(FaUserFriends, {\n    className: \"user-friends\"\n  }), __jsx(ViewWithPopup, {\n    key: 200,\n    noView: true,\n    className: \"room_guest\",\n    view: __jsx(_Button, {\n      type: \"default\"\n    }, __jsx(\"span\", null, \"Room \", roomGuest.room > 0 && \": \".concat(roomGuest.room)), __jsx(\"span\", null, \"-\"), __jsx(\"span\", null, \"Guest\", roomGuest.guest > 0 && \": \".concat(roomGuest.guest))),\n    popup: __jsx(RoomGuestWrapper, null, __jsx(ItemWrapper, null, __jsx(\"strong\", null, \"Room\"), __jsx(InputIncDec, {\n      id: \"room\",\n      increment: function increment() {\n        return handleIncrement('room');\n      },\n      decrement: function decrement() {\n        return handleDecrement('room');\n      },\n      onChange: function onChange(e) {\n        return handleIncDecOnChnage(e, 'room');\n      },\n      value: roomGuest.room\n    })), __jsx(ItemWrapper, null, __jsx(\"strong\", null, \"Guest\"), __jsx(InputIncDec, {\n      id: \"guest\",\n      increment: function increment() {\n        return handleIncrement('guest');\n      },\n      decrement: function decrement() {\n        return handleDecrement('guest');\n      },\n      onChange: function onChange(e) {\n        return handleIncDecOnChnage(e, 'guest');\n      },\n      value: roomGuest.guest\n    })))\n  })), __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    size: \"large\",\n    onClick: goToSearchPage\n  }, \"Find Hotels\"));\n};\n\nexport default withRouter(SearchForm);","map":null,"metadata":{},"sourceType":"module"}